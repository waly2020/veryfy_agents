<section class="space-y-6 px-4 pb-24 pt-6">
  <header>
    <h1 class="text-2xl font-semibold text-[color:var(--color-veryfy-blue)]">Entreprises</h1>
  </header>

  <section class="flex items-center justify-end">
    <a
      routerLink="/entreprises/create"
      class="inline-flex items-center gap-2 rounded-full bg-[color:var(--color-veryfy-blue)] px-4 py-2 text-[11px] font-semibold uppercase tracking-wide text-white shadow-sm shadow-[color:var(--color-veryfy-blue)]/40"
    >
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-4 w-4">
        <path d="M12 5a1 1 0 0 1 1 1v5h5a1 1 0 1 1 0 2h-5v5a1 1 0 1 1-2 0v-5H6a1 1 0 1 1 0-2h5V6a1 1 0 0 1 1-1Z" />
      </svg>
      Nouvelle entreprise
    </a>
  </section>

  <section *ngIf="errorMessage()" class="rounded-2xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm font-semibold text-rose-700">
    {{ errorMessage() }}
  </section>

  <section *ngIf="isLoading()" class="rounded-2xl border border-slate-100 bg-white px-4 py-3 text-sm text-slate-500 shadow-sm">
    Chargement des entreprises…
  </section>

  <section
    *ngIf="!isLoading() && !errorMessage() && entreprises().length === 0"
    class="rounded-2xl border border-dashed border-slate-200 bg-white px-4 py-4 text-sm text-slate-500"
  >
    Aucune entreprise trouvée.
  </section>

  <section class="space-y-3" *ngIf="entreprises().length">
    <article
      *ngFor="let entreprise of entreprises()"
      class="rounded-2xl border border-slate-100 bg-white p-4 shadow-sm"
    >
      <div class="flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between">
        <div>
          <h2 class="text-lg font-semibold text-slate-800">{{ entreprise.nom }}</h2>
          <p class="text-xs uppercase tracking-wide text-slate-400">
            ID {{ entreprise.id }} · {{ entreprise.ville || '—' }}
          </p>
        </div>
        <div class="flex items-center gap-2 text-xs">
          <span
            class="rounded-full px-3 py-1 font-semibold"
            [ngClass]="entreprise.verifie ? 'bg-emerald-100 text-emerald-700' : 'bg-amber-100 text-amber-700'"
          >
            {{ entreprise.verifie ? 'Vérifiée' : 'À vérifier' }}
          </span>
          <span class="rounded-full bg-[color:var(--color-veryfy-blue)]/10 px-3 py-1 font-semibold text-[color:var(--color-veryfy-blue)]">
            Badge {{ entreprise.badge_fiabilite }}
          </span>
        </div>
      </div>

      <dl class="mt-3 grid gap-3 text-xs text-slate-500 sm:grid-cols-2">
        <div class="flex items-center gap-2">
          <dt class="font-semibold text-slate-600">Email</dt>
          <dd>{{ entreprise.email }}</dd>
        </div>
        <div class="flex items-center gap-2">
          <dt class="font-semibold text-slate-600">Téléphone</dt>
          <dd>{{ entreprise.telephone || '—' }}</dd>
        </div>
        <div class="flex items-center gap-2">
          <dt class="font-semibold text-slate-600">Adresse</dt>
          <dd>{{ entreprise.adresse || '—' }}</dd>
        </div>
        <div class="flex items-center gap-2">
          <dt class="font-semibold text-slate-600">Enrôlée par</dt>
          <dd>{{ entreprise.agent_enrolleur.nom }}</dd>
        </div>
        <div class="flex items-center gap-2">
          <dt class="font-semibold text-slate-600">Services actifs</dt>
          <dd class="font-semibold text-[color:var(--color-veryfy-blue)]">
            {{ entreprise.services_count }}
          </dd>
        </div>
        <div class="flex items-center gap-2">
          <dt class="font-semibold text-slate-600">Employés actifs</dt>
          <dd class="font-semibold text-slate-700">{{ entreprise.employes_actifs }}</dd>
        </div>
      </dl>

      <footer class="mt-4 flex flex-wrap items-center gap-3 text-xs text-slate-500">
        <span>
          Enrôlée le
          <strong class="text-slate-600">
            {{ entreprise.date_enrollement | date: 'longDate' : undefined : 'fr-FR' }}
          </strong>
        </span>
        <span class="rounded-full bg-slate-100 px-3 py-1 font-semibold text-slate-600">
          {{ entreprise.taches_en_cours }} tâche(s) en cours
        </span>
      </footer>
    </article>
  </section>
</section>
